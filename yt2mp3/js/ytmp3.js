function getUuid(){return"yxyx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}))}var mp3_id=getUuid(),mp4_id=getUuid();$(document).delegate("#download,.download-mp3-mb","click",(function(){location.href=coreUrlPrefix+$(this).data(window[`${format}_id`])})),$(document).ready((function(){var e="mp3",o=$("#theme").attr("href");switch(o){case"d":o="l";break;case"l":o="d";break;default:o="l"}function t(e){$.post("/event/"+encodeURIComponent(e))}function a(e){$("#converter_wrapper").before(window.ismobile?`<div id="error"><p>An error occurred (\n          ${e.includes("url")?/tiktok/.test(location.href)?"please input tiktok url":"please input youtube url":"the video is restricted"}\n          )</p><p> ‚ù§Ô∏è Recommend you to download music by APP (${e.includes("url")?"support key words searches":"rich music search resources"}, completely safe and free)</p><p style="display: flex;justify-content:flex-end;align-items:baseline;"><a class="download" href="${window.appUrl}">üëâDownload APP</a><a class="refresh" href="">Convert Next</a></p></div>`:`<div id="error"><p>An error occurred (\n            ${/tiktok/.test(location.href)?"you should input tiktok url, ex:https://www.tiktok.com/@affelstan/video/...":e}\n            ).</p><p>Please try to convert another video by click <a class="refresh" href="">here</a>.</p></div>`).hide(),$("#error").show(),window.ismobile&&($("#error .download").click((function(){ym(85320316,"reachGoal","error-download-app")})),$("#error .refresh").click((function(){ym(85320316,"reachGoal","error_convert_next")}))),t("error")}window.ismobile||($("#withApp").hide(),$("#bookmark").show(),$("#more_format").hide()),(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&ym(85320316,"reachGoal","pwa-use"),window.ismobile&&(document.getElementById("download-button")&&document.getElementById("download-button").addEventListener("click",(function(){ym(85320316,"reachGoal","download_app_button_click"),ym(85320316,"reachGoal","app_icon_mb")})),$("#telegram").click((function(){ym(85320316,"reachGoal","telegram")})),$("#instagram").click((function(){ym(85320316,"reachGoal","instagram")}))),window.appUrl&&(document.getElementById("download-button")&&(document.getElementById("download-button").href=window.appUrl),document.getElementById("withApp")&&(document.getElementById("withApp").href=window.appUrl,document.getElementById("off-line").href=window.appUrl));let r=!1;function n(){var o=$(".parsed a:nth-child(1)").length>0?$(".parsed a:nth-child(1)"):$("#buttons a:nth-child(1)");o.text("Download "+e),o.forEach((e=>{$(e).attr("href","javascript:void(0)")}))}function i(e,o){window.trace.convert();let t=setTimeout((()=>{window.trace.convertPending()}),5e3);Math.random();if(/YVnTGDRXctA|bwzg38-Qnf8|LL0Njfd4oCk|Rfhsz62EHXs/i.test(e))return void $("#advise2").text("The URL is either not valid or not supported by our converter").css("color","red");if(!o&&(window.isAndroid&&(window.isWebview&&(window.open("https://hk.jebatconamed.com/iky1kXQuVidisOmd7/64073"),ym(85320316,"reachGoal","webview ad")),window.location.href=window.appUrl),!window.ismobile)){const e=localStorage.getItem("webapk");if(e){const o=new Date(Number(e)),t=new Date;o.getDay()===t.getDay()&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()||(window.location.href=window.appWebUrl,localStorage.setItem("webapk",Date.now()))}else window.location.href=window.appWebUrl,localStorage.setItem("webapk",Date.now())}window.searchUrl=encodeURIComponent(e),window.ismobile?ym(85320316,"reachGoal","convert_mb"):ym(85320316,"reachGoal","convert_pc"),function(e,o){$.post("/event/"+encodeURIComponent(e)+"/"+encodeURIComponent(o))}("parse_start",e);const i=window.YTMP3country;o?ym(85320316,"reachGoal","source_search"):($("#advise2").hide(),$(".a-inner").remove(),$("form").hide(),$("#progress").show(),ym(85320316,"reachGoal","source_direct")),$("#off-line").show(),function(){if(window.ismobile&&$(".follow-btns").show(),!r){r=!0;try{var e=document.createElement("div");e.className="ad-btn-left",e.innerText="DOWNLOAD NOW";var o=document.createElement("div");o.className="ad-btn-right",o.innerText="PLAY NOW";var t=document.createElement("div");t.className="ad-info",t.innerText="Advertising",e.addEventListener("click",(function(){window.ismobile?ym(85320316,"reachGoal","download_now_mb"):ym(85320316,"reachGoal","download_now_pc")})),o.addEventListener("click",(function(){window.ismobile?ym(85320316,"reachGoal","play_now_mb"):ym(85320316,"reachGoal","play_now_pc")})),$("#a-320-50").attr("class","a-320-50-show"),$("#a-320-50").append(e).append(o).append(t).show()}catch(e){}if(!window.ismobile){var a=document.createElement("script");a.type="text/javascript",a.async="async",a.dataset.cfasync="false",a.src="//upgulpinon.com/1?z=5340833",document.body.append(a)}if(window.ismobile&&!window.hasAd){window.atOptions={key:"d9ee967ccfa30ddbb9c2669a0ddba637",format:"iframe",height:90,width:728,params:{}};var n=document.createElement("script");n.type="text/javascript",n.src="//melodramaticlaughingbrandy.com/d9ee967ccfa30ddbb9c2669a0ddba637/invoke.js";var i=document.createElement("div");i.appendChild(n),i.style.width="100%",i.style.overflow="hidden",document.getElementById("a-320-50").after(i),i.appendChild(n),window.adBannerAds(),function(){const e=new URL(window.location.href),o=e.searchParams.get("click_id"),t=e.searchParams.get("source_id"),a=document.createElement("script");a.dataset.cfasync="false",a.src="https://push-sdk.com/f/sdk.js?z=832739",a.onload=e=>{e.zoneID=832739,e.extClickID=o,e.subID1=t,e.actions.onPermissionGranted=()=>{},e.actions.onPermissionDenied=()=>{},e.actions.onAlreadySubscribed=()=>{},e.actions.onError=()=>{}},document.head.appendChild(a)}()}window.ismobile||window.hasAd||window.adBannerAds(),window.hasAd=!0}}(),o?s(e,i,(function(e){if($download=$(".parsing .download"),$download.removeClass("download"),ismobile&&$download.addClass("download-mp3-mb").after("<a>320K-Mp3 with APP</a>"),$(".parsing").append("<a>Dropbox</a><a>Convert next</a>"),ismobile)$download.data(mp3_id,e.mp3),$download.data(mp4_id,e.mp4),Array.isArray(e.mp3)&&$download.data(mp3_id,e.mp3[0].mp3_url);else{let o=e.mp3||"";Array.isArray(e.mp3)&&(o=e.mp3[0].mp3_url),$(".parsing").append(`<div class="search-downloadlist" data-mp3="${o}" data-mp4="${e.mp4||""}"><div>MP3</div><div>MP4 360p</div><div>MP4 480p</div><div>MP4 720p</div><div>MP4 1080p</div></div>`)}$(".parsing").removeClass("parsing").addClass("parsed"),$(".lds-hourglass").removeClass("lds-hourglass").text("Download"),ismobile&&n()}),(function(){clearTimeout(t)})):/douyin.com|tiktok.com/i.test(e)?$.ajax({type:"POST",url:coreUrlPrefix+"/ttscraper/parse",data:{url:e},dataType:"json",success:function(e){if(1===e.status){const o=e.data;window.searchUrl=encodeURIComponent(o.original_url),$("#advise").text(o.video_title),function(e){$("#progress").hide(),$("#download-mp3").attr("href",coreUrlPrefix+"/ttscraper"+e.music_download_path),$("#download-mp4").attr("href",coreUrlPrefix+"/ttscraper"+e.video_download_path),$("#buttons").show(),$("#play_btn").data("url",e.wm_video_url)}(o)}else 0===e.status&&a(`message: ${e.message}`)},error:function(e){e.message?a(`message: ${e.message}`):a("code: 0-0")}}):/youtu|youtube/i.test(e)?s(e,i||"HK",null,(function(){clearTimeout(t)})):/https?:\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/.test(e)?(ym(85320316,"reachGoal","error-A"),a("url error")):d(e.trim())}function d(e){$.get(coreUrlPrefix+"/report/event",{event:"search",webSite:"ytmp3"}),$.ajax({type:"POST",url:`${coreUrlPrefix}/ytsearch`,data:JSON.stringify({key_word:e}),dataType:"json",success:function(e){if($("#progress").hide(),$("#suggestions").hide(),$("form").show(),$("#mp3").show(),$("#mp4").show(),!e.result||0===e.result.length)return void ym(85320316,"reachGoal","error-E");const o=$('<div id="search-result"></div>');o.append(e.result.map((function(e){return`<div class="search-item">\n          <div class="name">${e.title}</div>\n          <div class="properties">Source: YouTube ‚Ä¢ Time: ${e.duration} ‚Ä¢ </div>\n          <div class="options">\n            <a class="download" data-value="${e.url}">Download</a>\n            <a class="player" data-value="${e.id}">Play</a>\n          </div>\n          </div>`})).join("")),$("#a-320-50").after(o)}})}function s(e,o,r,i){$.get(coreUrlPrefix+"/report/event",{event:"parse",webSite:"ytmp3"}),$.ajax({type:"POST",url:coreUrlPrefix+"/newp",data:{u:e,c:o},dataType:"json",success:function(e){if(1===e.status){const o=e.data;window.searchUrlId=o.id,r?r(o):($("#advise").text(o.title),window.ismobile&&$("#advise3").show(),function(e){$("#progress").hide(),ismobile?($("#buttons a:nth-child(1)").data("mp3",e.mp3.slice(0,-100)),$("#buttons a:nth-child(1)").data("mp4",e.mp4),$("#buttons a:nth-child(1)").data(mp3_id,e.mp3),$("#buttons a:nth-child(1)").data(mp4_id,e.mp4),Array.isArray(e.mp3)&&($("#buttons a:nth-child(1)").data("mp3",e.mp3[0].mp3_url.slice(0,-100)),$("#buttons a:nth-child(1)").data(mp3_id,e.mp3[0].mp3_url)),$("#download_pc").hide(),n(),$(".table-download").click((function(){window.trace.buttons("various quality");let o="";if(Array.isArray(e.mp3)){if("1"===$(this).data("type").toString())o=e.mp3[0].mp3_url,ym(85320316,"reachGoal","mb-mp3-320kps");else if("2"===$(this).data("type").toString()){let t=1;1===e.mp3.length&&(t=0),o=e.mp3[t].mp3_url,ym(85320316,"reachGoal","mb-mp3-192kps")}else if("3"===$(this).data("type").toString()){let t=2%e.mp3.length;3===e.mp3.length&&(t=2),o=e.mp3[t].mp3_url,ym(85320316,"reachGoal","mb-mp3-128kps")}else if("4"===$(this).data("type").toString()){const t=e.mp3.length-1;o=e.mp3[t].mp3_url,ym(85320316,"reachGoal","mb-mp3-64kps")}}else o=e.mp3;location.href=coreUrlPrefix+o}))):($("#mp3").hide(),$("#mp4").hide(),$("#download").hide(),$("#download_pc").data(mp3_id,e.mp3),$("#download_pc").data(mp4_id,e.mp4),Array.isArray(e.mp3)&&$("#download_pc").data(mp3_id,e.mp3[0].mp3_url),$(document).delegate("#download_list div","click",(function(){if(window.trace.buttons("various quality"),ym(85320316,"reachGoal",`list_${$(this).text().toLowerCase().split(" ").join("_")}`),/mp3/i.test($(this).text())){let o="";if(Array.isArray(e.mp3)){if($(this).text().includes("320"))o=e.mp3[0].mp3_url,ym(85320316,"reachGoal","pc-mp3-320kps");else if($(this).text().includes("192")){let t=1;1===e.mp3.length&&(t=0),o=e.mp3[t].mp3_url,ym(85320316,"reachGoal","pc-mp3-192kps")}else if($(this).text().includes("128")){let t=2%e.mp3.length;3===e.mp3.length&&(t=2),o=e.mp3[t].mp3_url,ym(85320316,"reachGoal","pc-mp3-128kps")}else if($(this).text().includes("64")){const t=e.mp3.length-1;o=e.mp3[t].mp3_url,ym(85320316,"reachGoal","pc-mp3-64kps")}}else o=e.mp3;location.href=coreUrlPrefix+o}else location.href=coreUrlPrefix+e.mp4}))),$("#download_list").hide(),$("#buttons").show(),t("parse_success")}(o)),window.trace.convertSuccess()}else 0===e.status&&(a(`message: ${e.message}`),ym(85320316,"reachGoal","result-error"),window.trace.convertFail(),$.get(coreUrlPrefix+"/report/event",{event:"convertFailed",webSite:"ytmp3"}),["empty input youtube url or country","url is expire, please remake url","you should input youtube url, ex:https://www.youtube.com/watch?v=id"].includes(e.message)&&ym(85320316,"reachGoal","error-A"),gtag("event","convert_error",{message:e.message}))},error:function(e){const o=JSON.parse(e.response);window.trace.convertFail(),$.get(coreUrlPrefix+"/report/event",{event:"convertFailed",webSite:"ytmp3"}),window.xhr=e,0===o.status?"The video cannot exceed 90 minutes"===o.message?ym(85320316,"reachGoal","error-F"):o.message?ym(85320316,"reachGoal","error-C"):ym(85320316,"reachGoal","error-D"):ym(85320316,"reachGoal","error-D"),o.message?(a(`message: ${o.message}`),ym(85320316,"reachGoal","result-error"),gtag("event","convert_error",{message:o.message})):(gtag("event","convert_error",{message:"Network disconnection"}),a("code: 0-0"))},complete:function(){i&&i()}})}$(document).delegate("#banner","click",(function(){window.ismobile?ym(85320316,"reachGoal","banner-click-mb"):ym(85320316,"reachGoal","banner-click")})),$("#a-320-50").click((function(){window.trace.buttons("fake button")})),$(".social_share").click((function(){ym(85320316,"reachGoal","share-click")})),$("#download_pc").click((()=>{ym(85320316,"reachGoal","download button pc"),$("#download_list").toggle(),ym(85320316,"reachGoal","new_download"),window.trace.download()})),$("#more_format").click((()=>{window.trace.buttons("more format"),$("#formats-download").show(),ym(85320316,"reachGoal","more-format")})),source_url&&i(source_url),window.format="mp3",$("#formats a").click((function(){switch($(this).attr("id")){case"mp3":switch(window.format="mp3",window.ismobile&&$("#download").show(),$("#withApp").hide(),e="mp3",o){case"d":$("#mp3").css("background-color","#243961"),$("#mp4").css("background-color","#121d31");break;case"l":$("#mp3").css("background-color","#007cbe"),$("#mp4").css("background-color","#0087cf")}window.ismobile?ym(85320316,"reachGoal","mp3_mb"):ym(85320316,"reachGoal","mp3_pc"),$("#more_format").show();break;case"mp4":switch(window.format="mp4",window.ismobile&&$("#download").hide(),$("#withApp").show(),e="mp4",o){case"d":$("#mp4").css("background-color","#243961"),$("#mp3").css("background-color","#121d31");break;case"l":$("#mp4").css("background-color","#007cbe"),$("#mp3").css("background-color","#0087cf")}window.ismobile?ym(85320316,"reachGoal","mp4_mb"):ym(85320316,"reachGoal","mp4_pc"),$("#more_format").hide(),$("#formats-download").hide();break;case"off-line":return ym(85320316,"reachGoal","play_offline"),void window.open("https://www.mp3juice.zone");default:return}return n(),t("switch-format-"+e),!1})),$(document).delegate(".search-downloadlist div"," click",(function(){window.open("https://thaudray.com/4/5458359"),ym(85320316,"reachGoal",`search_list_${$(this).text().toLowerCase().split(" ").join("_")}`),$(this).text().includes("MP3")?location.href=coreUrlPrefix+$(this).parent().data("mp3"):$(this).text().includes("MP4")&&(location.href=coreUrlPrefix+$(this).parent().data("mp4"))}));const c=function(){switch($(this).text()){case"Download mp3":window.ismobile?ym(85320316,"reachGoal","mp3_download_mb"):ym(85320316,"reachGoal","mp3_download_pc"),ym(85320316,"reachGoal","real-download"),window.trace.download(),ym(85320316,"reachGoal","Download MP3"),$.ajax({url:coreUrlPrefix+"/dl2/countuserid"}),$.get(coreUrlPrefix+"/report/event",{event:"download",webSite:"ytmp3"}),t("download-"+e);break;case"Download mp4":window.ismobile?ym(85320316,"reachGoal","mp4_download_mb"):ym(85320316,"reachGoal","mp4_download_pc"),ym(85320316,"reachGoal","real-download"),window.trace.download(),window.open("https://dopansearor.com/4/4901994"),$.ajax({url:coreUrlPrefix+"/dl2/countuserid"}),$.get(coreUrlPrefix+"/report/event",{event:"download",webSite:"ytmp3"}),t("download-"+e);break;case"Play":if(document.querySelector("#player")?$("#player").show():$("#formats").after('\n            <div id="player">\n              <iframe src="" title="" width="100%" height="420" scrolling="no" allow="autoplay"></iframe>\n            </div>\n          '),/douyin.com|tiktok.com/.test(window.searchUrl))return void(document.querySelector("#player iframe").src=$("#play_btn").data("url"));const o=window.searchUrlId;document.querySelector("#player iframe").src="https://www.youtube.com/embed/"+o,$("#play_btn").text("Stop"),window.ismobile||ym(85320316,"reachGoal","Play"),ym(85320316,"reachGoal","play_click");break;case"Stop":$("#player").hide(),document.querySelector("#player iframe").src="",$("#play_btn").text("Play"),ym(85320316,"reachGoal","stop_click");break;case"Dropbox":return ym(85320316,"reachGoal","dropbox"),t("dropbox-"+e),void Dropbox.save(coreUrlPrefix+$(this).parent().find("[data-mp3]").data(mp3_id),$.trim($(this).parent().parent().find(".name").text()||$(this).parent().parent().find("#advise").text())+".mp3",{success:function(){$(this).text("Saved")},error:function(e){$(this).text("Error")}});case"320K-Mp3 with APP":return ym(85320316,"reachGoal","320k-mp3"),void window.open("https://dopansearor.com/4/4901994");case"Download MP4 with APP":return ym(85320316,"reachGoal","1080p-mp4"),void ym(85320316,"reachGoal","Download MP4 with APP");case"Convert next":ym(85320316,"reachGoal","convert next"),window.setTimeout((function(){window.location.href="/"}),500);default:return!0}};$(document).delegate(".parsed a","click",c),$("#buttons a").click(c),$("form #input").on("paste",(function(e){var o=(e.clipboardData||window.clipboardData).getData("Text");$("#search-result").remove(),i(o)})),$("#submit").click((()=>{$("#input").val()||ym(85320316,"reachGoal","convert-null")}));let l=null;$("form #input").keyup((function(e){clearTimeout(l),l=setTimeout((function(){const o=e.target.value;o.length>0&&!o.includes("youtube.com/")&&!o.includes("youtu.be/")?($("#suggestions").show(),$.ajax({dataType:"jsonp",url:`https://suggestqueries.google.com/complete/search?client=youtube&ds=yt&q=${o.trim()}`,success:e=>{$("#suggestions").empty();const o=e[1].map((e=>`<div class="sug-item">${e[0]}</div>`)).join("");$("#suggestions").append(o)}})):($("#suggestions").hide(),$("#suggestions").empty())}),500)})),$("#suggestions").delegate(".sug-item","click",(function(){const e=$(this).text();$("form #input").val(e),$("#suggestions").hide(),$("#suggestions").empty(),ym(85320316,"reachGoal","keyword-search"),$("#progress").show(),$("form").hide(),d(e)})),$("body").delegate(".download","click",(function(){$(this).parent().addClass("parsing"),$(this).addClass("lds-hourglass").text("initialize"),$("#converter_wrapper").show(),$("#error").hide(),i($(this).data("value"),!0)})),$("body").delegate(".player","click",(function(){let e=null;document.querySelector("#player")&&(e=$("#player").prev().find(".player"),document.querySelector("#player").remove()),"Play"===$(this).text()?($(this).parent().parent().after(`\n        <div id="player">\n          <iframe src="https://www.youtube.com/embed/${$(this).data("value")}" title="" width="100%" height="420" scrolling="no" allow="autoplay"></iframe>\n        </div>\n      `),e&&e.text("Play"),$(this).text("Stop")):$(this).text("Play")})),document.getElementById("input")&&document.getElementById("input").addEventListener("click",(function(){window.ismobile?ym(85320316,"reachGoal","input_click_mb"):ym(85320316,"reachGoal","input_click_pc")})),$("form").submit((function(){return $("#search-result").remove(),i($("#input").val()),ym(85320316,"reachGoal","convert click"),!1})),window.ismobile?document.getElementById("nav-source").addEventListener("mouseenter",(function(){ym(85320316,"reachGoal","nav_dropdown_show")}),!1):document.getElementById("nav-dropdown").addEventListener("mouseenter",(function(){ym(85320316,"reachGoal","nav_dropdown_show")}),!1),document.getElementById("top-youtubers").addEventListener("click",(function(){ym(85320316,"reachGoal","top_youtubers_click")}),!1)}));